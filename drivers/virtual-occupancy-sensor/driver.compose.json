{
  "name": {
    "en": "Virtual Occupancy Sensor"
  },
  "class": "sensor",
  "capabilities": [
    "alarm_motion",
    "occupancy_state"
  ],
  "capabilitiesOptions": {
    "alarm_motion": {
      "title": {
        "en": "Motion"
      }
    }
  },
  "platforms": [
    "local"
  ],
  "connectivity": [],
  "images": {
    "small": "/drivers/virtual-occupancy-sensor/assets/images/small.png",
    "large": "/drivers/virtual-occupancy-sensor/assets/images/large.png",
    "xlarge": "/drivers/virtual-occupancy-sensor/assets/images/xlarge.png"
  },
  "pair": [
    {
      "id": "list_devices",
      "template": "list_devices",
      "navigation": {
        "next": "add_devices"
      }
    },
    {
      "id": "add_devices",
      "template": "add_devices"
    }
  ],
  "settings": [
    {
      "type": "group",
      "label": {
        "en": "Detection Settings"
      },
      "children": [
        {
          "id": "motion_timeout",
          "type": "number",
          "label": {
            "en": "Motion detection timeout (seconds)"
          },
          "hint": {
            "en": "Time to wait for motion after door closes before marking room as empty"
          },
          "value": 30,
          "min": 5,
          "max": 300,
          "units": {
            "en": "seconds"
          }
        },
        {
          "id": "active_on_door_open",
          "type": "checkbox",
          "label": {
            "en": "Zone active when door is open"
          },
          "hint": {
            "en": "If enabled, the virtual sensor will report motion (alarm_motion: true) while the door is open."
          },
          "value": true
        },
        {
          "id": "active_on_checking",
          "type": "checkbox",
          "label": {
            "en": "Zone active when checking"
          },
          "hint": {
            "en": "If enabled, the virtual sensor will report motion (alarm_motion: true) while checking for motion after door closes."
          },
          "value": false
        }
      ]
    },
    {
      "type": "group",
      "label": {
        "en": "Manual Sensor Configuration (Optional)"
      },
      "children": [
        {
          "id": "door_sensors",
          "type": "text",
          "label": {
            "en": "Door sensor device IDs (comma-separated)"
          },
          "hint": {
            "en": "OPTIONAL: Leave empty to auto-detect sensors in the same room. Only use this if you want to manually specify door sensors from other rooms."
          },
          "value": ""
        },
        {
          "id": "motion_sensors",
          "type": "text",
          "label": {
            "en": "Motion sensor device IDs (comma-separated)"
          },
          "hint": {
            "en": "OPTIONAL: Leave empty to auto-detect sensors in the same room. Only use this if you want to manually specify motion sensors from other rooms."
          },
          "value": ""
        }
      ]
    }
  ]
}
